import{_ as i,c as u,a as s,d as t,w as e,t as o,b as n,e as l,r as c,o as r}from"./app-mn1wI6jn.js";const d={},q=s("h3",{id:"Âü∫Á°ÄÁî®Ê≥ïÊïôÁ®ã-üìñ",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#Âü∫Á°ÄÁî®Ê≥ïÊïôÁ®ã-üìñ"},[s("span",null,"Âü∫Á°ÄÁî®Ê≥ïÊïôÁ®ã üìñ")])],-1),k=s("p",null,"Êú¨ÊïôÁ®ãÊòØÂ∏ÆÂä©ÊÇ®Â≠¶‰π†ÂíåÊâßË°å zentity Âü∫Êú¨ÂäüËÉΩÁöÑÁ≥ªÂàóÊïôÁ®ã‰πã‰∏Ä„ÄÇÊØèÁØáÊïôÁ®ãÈÉΩ‰ºöÂú®‰πãÂâçÊïôÁ®ãÁöÑÂü∫Á°Ä‰∏äÂ¢ûÂä†‰∏Ä‰∫õÂ§çÊùÇÂäüËÉΩÔºåÂõ†Ê≠§ÊÇ®ÂèØ‰ª•‰ªéÁÆÄÂçïÁöÑÂäüËÉΩÂºÄÂßãÔºåÈÄêÊ≠•Â≠¶‰π†Êõ¥È´òÁ∫ßÁöÑÂäüËÉΩ„ÄÇ",-1),v=s("li",null,[s("strong",null,"Âº∫Â§ßÁöÑÂêçÁß∞ÂåπÈÖç"),n(" ‚Üê "),s("em",null,"‰Ω†Âú®ËøôÈáå")],-1),m=l(`<h1 id="robust-name-matching" tabindex="-1"><a class="header-anchor" href="#robust-name-matching"><span>Robust Name Matching</span></a></h1><p>This tutorial adds a little more sophistication to the prior tutorial on exact name matching. This time you will map a single attribute to multiple fields of a single index.</p><p>Using a one-to-many relationship between attributes and index fields, you can compare the value of an attribute to multiple representations in the index. Elasticsearch allows you to create subfields where you can index the same value in different ways. For example, you might want to index a name by its exact value using the keyword data type, its full text value using the text data type, or its phonetic encoding using the phonetic analysis plugin. Elasticsearch allows you to query any of these representations of the name and return the original value of the name.</p><p>You can use this to your advantage with zentity. All you need to do is map the attribute and a matcher to each of those fields. When you submit an entity resolution job, attributes will be compared to every index field to which they are mapped.</p><p>Let&#39;s dive in.</p><blockquote><p><strong>Before you start</strong></p><p>You must install Elasticsearch, Kibana, and zentity to complete this tutorial. This tutorial was tested with zentity-1.6.1-elasticsearch-7.10.1.</p></blockquote><blockquote><p><strong>Quick start</strong></p></blockquote><blockquote><p>You can use the zentity sandbox which has the required software and data for these tutorials. This will let you skip many of the setup steps.</p></blockquote><h2 id="_1-prepare-for-the-tutorial" tabindex="-1"><a class="header-anchor" href="#_1-prepare-for-the-tutorial"><span>1. Prepare for the tutorial</span></a></h2><h3 id="_1-1-install-the-required-plugins" tabindex="-1"><a class="header-anchor" href="#_1-1-install-the-required-plugins"><span>1.1 Install the required plugins</span></a></h3><p>Note: Skip this step if you&#39;re using the zentity sandbox.</p><p>This tutorial uses the phonetic analysis plugin and ICU analysis plugin for Elasticsearch. You will need to stop Elasticsearch, install these plugin, and start Elasticsearch. You can learn more about Elasticsearch plugin management here.</p><p>For Linux (in the $ES_HOME directory of a .tar.gz installation):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> bin/elasticsearch-plugin <span class="token function">install</span> analysis-phonetic</span>
<span class="line"><span class="token function">sudo</span> bin/elasticsearch-plugin <span class="token function">install</span> analysis-icu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>For Windows (in the $ES_HOME directory of a .zip installation):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">bin/elasticsearch-plugin.bat <span class="token function">install</span> analysis-phonetic</span>
<span class="line">bin/elasticsearch-plugin.bat <span class="token function">install</span> analysis-icu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-open-the-kibana-console-ui" tabindex="-1"><a class="header-anchor" href="#_1-2-open-the-kibana-console-ui"><span>1.2 Open the Kibana Console UI</span></a></h3><p>The Kibana Console UI makes it easy to submit requests to Elasticsearch and read responses.</p><h3 id="_1-3-delete-any-old-tutorial-indices" tabindex="-1"><a class="header-anchor" href="#_1-3-delete-any-old-tutorial-indices"><span>1.3 Delete any old tutorial indices</span></a></h3><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Let&#39;s start from scratch. Delete any tutorial indices you might have created from other tutorials.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">DELETE zentity_tutorial_2_*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-4-create-the-tutorial-index" tabindex="-1"><a class="header-anchor" href="#_1-4-create-the-tutorial-index"><span>1.4 Create the tutorial index</span></a></h3><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Now create the index for this tutorial.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">PUT zentity_tutorial_2_robust_name_matching</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;analysis&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;street_suffix_map&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;pattern&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;(st)&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;replacement&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;street&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phonetic&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;encoder&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;nysiis&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;punct_white&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;pattern&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\\\\p{Punct}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;replacement&quot;</span> <span class="token operator">:</span> <span class="token string">&quot; &quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;remove_non_digits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;pattern&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[^\\\\d]&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;replacement&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;analyzer&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;name_clean&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;icu_normalizer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;icu_folding&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;punct_white&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;name_phonetic&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;icu_normalizer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;icu_folding&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;punct_white&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;phonetic&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;street_clean&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;icu_normalizer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;icu_folding&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;punct_white&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;trim&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phone_clean&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;remove_non_digits&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_phonetic&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_phonetic&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;street_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;keyword&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;phone_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;keyword&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice that this index defines multiple fields under the first_name and last_name fields. There are three fields we can query for first_name and last_name:</p><ul><li>first_name and last_name use the standard analyzer.</li><li>first_name.clean and last_name.clean use a custom analyzer called name_clean.</li><li>first_name.phonetic and last_name.phonetic use a custom analyzer called name_phonetic. We defined name_clean and name_phonetic in the settings of the index. name_clean uses the icu_normalizer and icu_folding filters to convert any accented Unicode characters to their ASCII equivalent and normalize the casing of the characters. name_phonetic does the same thing, and then it transforms the tokens of the value into their phonetic representations using the nysiis phonetic encoding algorithm.</li></ul><blockquote><p><strong>Tip</strong></p><p>Analyzers are powerful tools to improve the accuracy of entity resolution. But they come with costs. The first cost is performance. Whenever a query is submitting to Elasticsearch, the analyzers will process the input values. zentity can submit many queries in a single entity resolution job, and the overall performance of a job can degrade significantly if you use regular expressions or other compute intensive filters in your analyzers. The second cost is flexibility. You can&#39;t change the analyzers of fields without reindexing the data to an index with different analyzers. So you should put careful thought into your analyzers and test them before using them in production.</p></blockquote><p>Let&#39;s see how these analyzers produce different tokens for the same value.</p><h4 id="example-of-name-clean" tabindex="-1"><a class="header-anchor" href="#example-of-name-clean"><span>Example of name_clean</span></a></h4><p>Our name_clean analyzer uses the standard tokenizer, converts accented characters to their ASCII equivalent, and normalizes the case of the characters.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST zentity_tutorial_2_robust_name_matching/_analyze</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alice Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_clean&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;tokens&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;alice&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">2</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="example-of-name-phonetic" tabindex="-1"><a class="header-anchor" href="#example-of-name-phonetic"><span>Example of name_phonetic</span></a></h4><p>Our name_phonetic analyzer performs the same steps as our name_clean analyzer, and then it encodes each token using the NYSIIS algorithm. Notice how the token &quot;Alice&quot; becomes encoded as &quot;ALAC,&quot; which is the same encoding of phonetically similar names such as &quot;Alicia&quot; or typos such as &quot;Allice.&quot;</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST zentity_tutorial_2_robust_name_matching/_analyze</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alice Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_phonetic&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;tokens&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ALAC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JAN&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SNAT&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">2</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-load-the-tutorial-data" tabindex="-1"><a class="header-anchor" href="#_1-5-load-the-tutorial-data"><span>1.5 Load the tutorial data</span></a></h3><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Add the tutorial data to the index.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">POST _bulk?refresh</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;1&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;allie@example.net&quot;, &quot;first_name&quot;: &quot;Allie&quot;, &quot;id&quot;: &quot;1&quot;, &quot;last_name&quot;: &quot;Jones&quot;, &quot;phone&quot;: &quot;202-555-1234&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;123 Main St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;2&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;&quot;, &quot;first_name&quot;: &quot;Alicia&quot;, &quot;id&quot;: &quot;2&quot;, &quot;last_name&quot;: &quot;Johnson&quot;, &quot;phone&quot;: &quot;202-123-4567&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;300 Main St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;3&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;&quot;, &quot;first_name&quot;: &quot;Allie&quot;, &quot;id&quot;: &quot;3&quot;, &quot;last_name&quot;: &quot;Jones&quot;, &quot;phone&quot;: &quot;&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;123 Main St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;4&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;&quot;, &quot;email&quot;: &quot;&quot;, &quot;first_name&quot;: &quot;Ally&quot;, &quot;id&quot;: &quot;4&quot;, &quot;last_name&quot;: &quot;Joans&quot;, &quot;phone&quot;: &quot;202-555-1234&quot;, &quot;state&quot;: &quot;&quot;, &quot;street&quot;: &quot;&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;5&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Arlington&quot;, &quot;email&quot;: &quot;ej@example.net&quot;, &quot;first_name&quot;: &quot;Eli&quot;, &quot;id&quot;: &quot;5&quot;, &quot;last_name&quot;: &quot;Jonas&quot;, &quot;phone&quot;: &quot;&quot;, &quot;state&quot;: &quot;VA&quot;, &quot;street&quot;: &quot;500 23rd Street&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;6&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;allie@example.net&quot;, &quot;first_name&quot;: &quot;Allison&quot;, &quot;id&quot;: &quot;6&quot;, &quot;last_name&quot;: &quot;Jones&quot;, &quot;phone&quot;: &quot;202-555-1234&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;123 Main St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;7&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;&quot;, &quot;first_name&quot;: &quot;Allison&quot;, &quot;id&quot;: &quot;7&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;phone&quot;: &quot;+1 (202) 555 1234&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;555 Broad St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;8&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;alan.smith@example.net&quot;, &quot;first_name&quot;: &quot;Alan&quot;, &quot;id&quot;: &quot;8&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;phone&quot;: &quot;202-000-5555&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;555 Broad St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;9&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;alan.smith@example.net&quot;, &quot;first_name&quot;: &quot;Alan&quot;, &quot;id&quot;: &quot;9&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;phone&quot;: &quot;2020005555&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;555 Broad St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;10&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;&quot;, &quot;first_name&quot;: &quot;Alison&quot;, &quot;id&quot;: &quot;10&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;phone&quot;: &quot;202-555-9876&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;555 Broad St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;11&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;&quot;, &quot;email&quot;: &quot;allie@example.net&quot;, &quot;first_name&quot;: &quot;Alison&quot;, &quot;id&quot;: &quot;11&quot;, &quot;last_name&quot;: &quot;Jones-Smith&quot;, &quot;phone&quot;: &quot;2025559867&quot;, &quot;state&quot;: &quot;&quot;, &quot;street&quot;: &quot;&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;12&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Washington&quot;, &quot;email&quot;: &quot;allison.j.smith@corp.example.net&quot;, &quot;first_name&quot;: &quot;Allison&quot;, &quot;id&quot;: &quot;12&quot;, &quot;last_name&quot;: &quot;Jones-Smith&quot;, &quot;phone&quot;: &quot;&quot;, &quot;state&quot;: &quot;DC&quot;, &quot;street&quot;: &quot;555 Broad St&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;13&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Arlington&quot;, &quot;email&quot;: &quot;allison.j.smith@corp.example.net&quot;, &quot;first_name&quot;: &quot;Allison&quot;, &quot;id&quot;: &quot;13&quot;, &quot;last_name&quot;: &quot;Jones Smith&quot;, &quot;phone&quot;: &quot;703-555-5555&quot;, &quot;state&quot;: &quot;VA&quot;, &quot;street&quot;: &quot;1 Corporate Way&quot;}</span>
<span class="line">{&quot;index&quot;: {&quot;_id&quot;: &quot;14&quot;, &quot;_index&quot;: &quot;zentity_tutorial_2_robust_name_matching&quot;}}</span>
<span class="line">{&quot;city&quot;: &quot;Arlington&quot;, &quot;email&quot;: &quot;elise.jonas@corp.example.net&quot;, &quot;first_name&quot;: &quot;Elise&quot;, &quot;id&quot;: &quot;14&quot;, &quot;last_name&quot;: &quot;Jonas&quot;, &quot;phone&quot;: &quot;703-555-5555&quot;, &quot;state&quot;: &quot;VA&quot;, &quot;street&quot;: &quot;1 Corporate Way&quot;}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here&#39;s what the tutorial data looks like.</p><table><thead><tr><th>id</th><th>first_name</th><th>last_name</th><th>street</th><th>city</th><th>state</th><th>phone</th><th>email</th></tr></thead><tbody><tr><td>1</td><td>Allie</td><td>Jones</td><td>123 Main St</td><td>Washington</td><td>DC</td><td>202-555-1234</td><td>allie@example.net</td></tr><tr><td>2</td><td>Alicia</td><td>Johnson</td><td>300 Main St</td><td>Washington</td><td>DC</td><td>202-123-4567</td><td></td></tr><tr><td>3</td><td>Allie</td><td>Jones</td><td>123 Main St</td><td>Washington</td><td>DC</td><td></td><td></td></tr><tr><td>4</td><td>Ally</td><td>Joans</td><td></td><td></td><td></td><td>202-555-1234</td><td></td></tr><tr><td>5</td><td>Eli</td><td>Jonas</td><td>500 23rd Street</td><td>Arlington</td><td>VA</td><td></td><td>ej@example.net</td></tr><tr><td>6</td><td>Allison</td><td>Jones</td><td>123 Main St</td><td>Washington</td><td>DC</td><td>202-555-1234</td><td>allie@example.net</td></tr><tr><td>7</td><td>Allison</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>+1 (202) 555 1234</td><td></td></tr><tr><td>8</td><td>Alan</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>202-000-5555</td><td>alan.smith@example.net</td></tr><tr><td>9</td><td>Alan</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>2020005555</td><td>alan.smith@example.net</td></tr><tr><td>10</td><td>Alison</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>202-555-9876</td><td></td></tr><tr><td>11</td><td>Alison</td><td>Jones-Smith</td><td></td><td></td><td></td><td>2025559867</td><td>allie@example.net</td></tr><tr><td>12</td><td>Allison</td><td>Jones-Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td></td><td>allison.j.smith@corp.example.net</td></tr><tr><td>13</td><td>Allison</td><td>Jones Smith</td><td>1 Corporate Way</td><td>Arlington</td><td>VA</td><td>703-555-5555</td><td>allison.j.smith@corp.example.net</td></tr><tr><td>14</td><td>Elise</td><td>Jonas</td><td>1 Corporate Way</td><td>Arlington</td><td>VA</td><td>703-555-5555</td><td>elise.jonas@corp.example.net</td></tr></tbody></table><h2 id="_2-create-the-entity-model" tabindex="-1"><a class="header-anchor" href="#_2-create-the-entity-model"><span>2. Create the entity model</span></a></h2><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Let&#39;s use the Models API to create the entity model below. We&#39;ll review each part of the model in depth.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">PUT _zentity/models/zentity_tutorial_2_person</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;resolvers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;name_only&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;matchers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;simple&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;fuzzy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;fuzziness&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;indices&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;.zentity-models&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_person&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-review-the-attributes" tabindex="-1"><a class="header-anchor" href="#_2-1-review-the-attributes"><span>2.1 Review the attributes</span></a></h3><p>We defined two attributes called &quot;first_name&quot; and &quot;last_name&quot; as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is identical to the &quot;attributes&quot; field of the entity model in the exact name matching tutorial.</p><h3 id="_2-2-review-the-resolvers" tabindex="-1"><a class="header-anchor" href="#_2-2-review-the-resolvers"><span>2.2 Review the resolvers</span></a></h3><p>We defined a single resolver called &quot;name_only&quot; as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;resolvers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;name_only&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is identical to the &quot;resolvers&quot; field of the entity model in the exact name matching tutorial.</p><blockquote><p><strong>Tip</strong></p><p>Most resolvers should use multiple attributes to resolve an entity to minimize false positives. Many people share the same name, but few people share the same name and address. Consider all the combinations of attributes that could resolve an entity with confidence, and then create a resolver for each combination. Other tutorials explore how to use resolvers with multiple attributes.</p></blockquote><p>2.3 Review the matchers We defined two matchers called &quot;simple&quot; and &quot;fuzzy&quot; as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;matchers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;simple&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;fuzzy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;fuzziness&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The &quot;simple&quot; matcher uses a simple match clause:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The &quot;fuzzy&quot; matcher uses a match clause with the fuzziness parameter, which matches values with minor dissimilarities such as typos. Elasticsearch uses the Damerau-Levenshtein edit distance to perform this match.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">      <span class="token property">&quot;fuzziness&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,70),b=l(`<h3 id="_2-4-review-the-indices" tabindex="-1"><a class="header-anchor" href="#_2-4-review-the-indices"><span>2.4 Review the indices</span></a></h3><p>We defined a single index as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;indices&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-resolve-an-entity" tabindex="-1"><a class="header-anchor" href="#_3-resolve-an-entity"><span>3. Resolve an entity</span></a></h2><h3 id="_3-1-run-a-basic-resolution-job" tabindex="-1"><a class="header-anchor" href="#_3-1-run-a-basic-resolution-job"><span>3.1 Run a basic resolution job</span></a></h3><p>Let&#39;s use the Resolution API to resolve a person with a known first name and last name.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST _zentity/resolution/zentity_tutorial_2_person?pretty&amp;_source=<span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Ally&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Joans&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As expected, we retrieved three documents that match the first name &quot;Allie&quot; and the last name &quot;Jones,&quot; whether those matches were exact matches, phonetic matches, or transposed matches. The results include a document with the first name &quot;Ally&quot; and the last name &quot;Joans,&quot; which meet this criteria. All documents came from the same index at the same query of the same hop, as shown in the &quot;_index&quot;, &quot;_hop&quot;, and &quot;_query&quot; fields.</p><h3 id="_3-2-show-the-source" tabindex="-1"><a class="header-anchor" href="#_3-2-show-the-source"><span>3.2 Show the &quot;_source&quot;</span></a></h3><p>We can include the original values of each document as they exist in Elasticsearch.</p><p>Let&#39;s run the job again, and now let&#39;s include the &quot;_source&quot; field of each document. The &quot;_source&quot; field is the original JSON document that&#39;s stored in an Elasticsearch index.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST _zentity/resolution/zentity_tutorial_2_person?pretty&amp;_source=<span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;allie@example.net&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-1234&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;123 Main St&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;123 Main St&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Ally&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Joans&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Ally&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Joans&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-1234&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, in addition to the values mapped to our normalized &quot;_attributes&quot;, we can see the values of those attributes and the values of every other field as they exist in the &quot;_source&quot; of the documents.</p><h3 id="_3-3-show-the-explanation" tabindex="-1"><a class="header-anchor" href="#_3-3-show-the-explanation"><span>3.3 Show the &quot;_explanation&quot;</span></a></h3><p>We can learn how the documents matched, too.</p><p>Let&#39;s run the job again, and now let&#39;s include the &quot;_explanation&quot; field to see exactly why each document matched. The &quot;_explanation&quot; field tells us which resolvers caused a document to match, and more specifically, which input value matched which indexed value using which matcher and any parameters.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST _zentity/resolution/zentity_tutorial_2_person?pretty&amp;_source=<span class="token boolean">true</span>&amp;_explanation=<span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_explanation&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;resolvers&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;name_only&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;allie@example.net&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-1234&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;123 Main St&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allie&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_explanation&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;resolvers&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;name_only&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;123 Main St&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_2_robust_name_matching&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Ally&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Joans&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_explanation&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;resolvers&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;name_only&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Ally&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Joans&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Ally&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Joans&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-1234&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Each document matched because of the &quot;name_only&quot; resolver as shown under &quot;_explanation&quot;.&quot;resolvers&quot;. Two of the documents had attributes that each matched in two different ways as shown in &quot;_explanation&quot;.&quot;matches&quot;.</p><p>Let&#39;s look at a few of those matches:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token property">&quot;_explanation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  ...</span>
<span class="line">  <span class="token property">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    ...</span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>These two matches tell us that the &quot;first_name&quot; attribute was discovered at two index fields called &quot;first_name.clean&quot; and &quot;first_name.phonetic&quot;. We can see that both fields had a value of &quot;Allie&quot; that matched a prior known attribute value of &quot;Allie&quot; using the &quot;fuzzy&quot; and &quot;simple&quot; matchers that we defined in our entity model. In other words, there were multiple reasons for the match.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">&quot;_explanation&quot;: {</span>
<span class="line">  ...</span>
<span class="line">  &quot;matches&quot; : [</span>
<span class="line">    {</span>
<span class="line">      &quot;attribute&quot; : &quot;last_name&quot;,</span>
<span class="line">      &quot;target_field&quot; : &quot;last_name.phonetic&quot;,</span>
<span class="line">      &quot;target_value&quot; : &quot;Joans&quot;,</span>
<span class="line">      &quot;input_value&quot; : &quot;Jones&quot;,</span>
<span class="line">      &quot;input_matcher&quot; : &quot;simple&quot;,</span>
<span class="line">      &quot;input_matcher_params&quot; : { }</span>
<span class="line">    }</span>
<span class="line">    ...</span>
<span class="line">  ]</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This match shows something more interesting than the prior tutorial on exact name matching. This time the value of &quot;target_value&quot; (&quot;Joans&quot;) was different from &quot;input_value&quot; (&quot;Jones&quot;). But they were considered a match because the text value of &quot;last_name.phonetic&quot; is stored in a phonetic representation that matched the text of the input value.</p><blockquote><p><strong>Tip</strong></p><p>Keep in mind that the &quot;target_value&quot; under the &quot;_explanation&quot;.&quot;matches&quot; shows the value prior to any text analysis. In this example, the field &quot;last_name.phonetic&quot; was a text field that uses phonetic analysis. So the actual match was between the values of &quot;target_value&quot; and &quot;input_value&quot; after the values were analyzed.</p></blockquote><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST zentity_tutorial_2_robust_name_matching/_analyze</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_phonetic&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST zentity_tutorial_2_robust_name_matching/_analyze</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Joans&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_phonetic&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Our &quot;name_phonetic&quot; analyzer, which we defined in our index settings, converts both &quot;Jones&quot; and &quot;Joans&quot; to the token &quot;JAN&quot;, hence the match.</p><h1 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h1><p>Congratulations! You learned how to map a single attribute to multiple fields in a single index. You also observed how to perform more robust name matching by using fuzziness, phonetic analyzers, and ICU analyzers.</p><p>But we can do better than name matching, right? Lots of people share the same name. How can we improve accuracy?</p><p>The next tutorial will introduce multiple attribute resolution. You will resolve an entity using multiple attributes mapped to multiple fields of a single index.</p>`,40);function h(p,y){const a=c("RouteLink");return r(),u("div",null,[q,k,s("ol",null,[s("li",null,[t(a,{to:"/docs/basic-usage/exact-name-matching/"},{default:e(()=>[n("Á≤æÁ°ÆÁöÑÂêçÁß∞ÂåπÈÖç")]),_:1})]),v,s("li",null,[t(a,{to:"/docs/basic-usage/multiple-attribute-resolution/"},{default:e(()=>[n("Â§öÂ±ûÊÄßËß£Êûê")]),_:1})]),s("li",null,[t(a,{to:"/docs/basic-usage/multiple-resolver-resolution/"},{default:e(()=>[n("Â§öËß£ÊûêÂô®Ëß£Êûê")]),_:1})]),s("li",null,[t(a,{to:"/docs/basic-usage/cross-index-resolution/"},{default:e(()=>[n("Ë∑®Á¥¢ÂºïËß£Êûê")]),_:1})]),s("li",null,[t(a,{to:"/docs/basic-usage/scoping-resolution/"},{default:e(()=>[n("Scoping Resolution")]),_:1})])]),m,s("p",null,'The "'+o(p.field)+'" and "'+o(p.value)+'" strings are special variables. Every matcher should have these variables defined somewhere in the "clause" field. zentity will replace the "'+o(p.field)+'" variable with the name of an index field and the "'+o(p.value)+'" variable with the value of an attribute.',1),b])}const g=i(d,[["render",h],["__file","index.html.vue"]]),f=JSON.parse('{"path":"/docs/basic-usage/robust-name-matching/","title":"Âº∫Â§ßÁöÑÂêçÁß∞ÂåπÈÖç","lang":"zh-CN","frontmatter":{"title":"Âº∫Â§ßÁöÑÂêçÁß∞ÂåπÈÖç","pre":{"text":"Á≤æÁ°ÆÁöÑÂêçÁß∞ÂåπÈÖç","link":"/docs/basic-usage/exact-name-matching/index.html"},"next":{"text":"Â§öÂ±ûÊÄßËß£Êûê","link":"/docs/basic-usage/multiple-attribute-resolution/index.html"}},"headers":[{"level":3,"title":"Âü∫Á°ÄÁî®Ê≥ïÊïôÁ®ã üìñ","slug":"Âü∫Á°ÄÁî®Ê≥ïÊïôÁ®ã-üìñ","link":"#Âü∫Á°ÄÁî®Ê≥ïÊïôÁ®ã-üìñ","children":[]},{"level":2,"title":"1. Prepare for the tutorial","slug":"_1-prepare-for-the-tutorial","link":"#_1-prepare-for-the-tutorial","children":[{"level":3,"title":"1.1 Install the required plugins","slug":"_1-1-install-the-required-plugins","link":"#_1-1-install-the-required-plugins","children":[]},{"level":3,"title":"1.2 Open the Kibana Console UI","slug":"_1-2-open-the-kibana-console-ui","link":"#_1-2-open-the-kibana-console-ui","children":[]},{"level":3,"title":"1.3 Delete any old tutorial indices","slug":"_1-3-delete-any-old-tutorial-indices","link":"#_1-3-delete-any-old-tutorial-indices","children":[]},{"level":3,"title":"1.4 Create the tutorial index","slug":"_1-4-create-the-tutorial-index","link":"#_1-4-create-the-tutorial-index","children":[]},{"level":3,"title":"1.5 Load the tutorial data","slug":"_1-5-load-the-tutorial-data","link":"#_1-5-load-the-tutorial-data","children":[]}]},{"level":2,"title":"2. Create the entity model","slug":"_2-create-the-entity-model","link":"#_2-create-the-entity-model","children":[{"level":3,"title":"2.1 Review the attributes","slug":"_2-1-review-the-attributes","link":"#_2-1-review-the-attributes","children":[]},{"level":3,"title":"2.2 Review the resolvers","slug":"_2-2-review-the-resolvers","link":"#_2-2-review-the-resolvers","children":[]},{"level":3,"title":"2.4 Review the indices","slug":"_2-4-review-the-indices","link":"#_2-4-review-the-indices","children":[]}]},{"level":2,"title":"3. Resolve an entity","slug":"_3-resolve-an-entity","link":"#_3-resolve-an-entity","children":[{"level":3,"title":"3.1 Run a basic resolution job","slug":"_3-1-run-a-basic-resolution-job","link":"#_3-1-run-a-basic-resolution-job","children":[]},{"level":3,"title":"3.2 Show the \\"_source\\"","slug":"_3-2-show-the-source","link":"#_3-2-show-the-source","children":[]},{"level":3,"title":"3.3 Show the \\"_explanation\\"","slug":"_3-3-show-the-explanation","link":"#_3-3-show-the-explanation","children":[]}]}],"git":{"updatedTime":1723191753000,"contributors":[{"name":"xufeiranfree","email":"xu.feiran@qq.com","commits":2}]},"filePathRelative":"docs/basic-usage/robust-name-matching/index.md"}');export{g as comp,f as data};
