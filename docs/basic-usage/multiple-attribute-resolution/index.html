<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta name="google-site-verification" content="q2k6tX5Cr-G8xLqj8gd6y1d972NEjmmAqC-LTYPdTcs"><title>多属性解析 | zentity 中文文档</title><meta name="description" content="Elasticsearch 实体解析">
    <link rel="preload" href="/assets/style-CBJpI1UF.css" as="style"><link rel="stylesheet" href="/assets/style-CBJpI1UF.css">
    <link rel="modulepreload" href="/assets/app-mn1wI6jn.js"><link rel="modulepreload" href="/assets/index.html-Cicu9RZV.js">
    <link rel="prefetch" href="/assets/index.html-gWmxwcHC.js" as="script"><link rel="prefetch" href="/assets/index.html-Bq2eBQbN.js" as="script"><link rel="prefetch" href="/assets/index.html-CUNtYo1c.js" as="script"><link rel="prefetch" href="/assets/index.html-D6-PrXlr.js" as="script"><link rel="prefetch" href="/assets/index.html-BTpq3twR.js" as="script"><link rel="prefetch" href="/assets/index.html-v6oXbEWq.js" as="script"><link rel="prefetch" href="/assets/index.html-CQpNIakp.js" as="script"><link rel="prefetch" href="/assets/index.html-BhfiIf-j.js" as="script"><link rel="prefetch" href="/assets/index.html-DKfH-Upr.js" as="script"><link rel="prefetch" href="/assets/index.html-DeQt4yp5.js" as="script"><link rel="prefetch" href="/assets/index.html-DP3dOJFI.js" as="script"><link rel="prefetch" href="/assets/index.html-DZmdfw3B.js" as="script"><link rel="prefetch" href="/assets/index.html-D6VBD3gC.js" as="script"><link rel="prefetch" href="/assets/index.html-LvEODCxX.js" as="script"><link rel="prefetch" href="/assets/index.html-yNgK9PPt.js" as="script"><link rel="prefetch" href="/assets/index.html-CgVQrCFg.js" as="script"><link rel="prefetch" href="/assets/index.html-B4_Em-Ox.js" as="script"><link rel="prefetch" href="/assets/index.html-BcVm65Bm.js" as="script"><link rel="prefetch" href="/assets/index.html-B80W-REi.js" as="script"><link rel="prefetch" href="/assets/index.html-mAVRgktn.js" as="script"><link rel="prefetch" href="/assets/index.html-DGaJxh0n.js" as="script"><link rel="prefetch" href="/assets/index.html-DHJevau3.js" as="script"><link rel="prefetch" href="/assets/index.html-C5O18_9m.js" as="script"><link rel="prefetch" href="/assets/index.html-BRoDjccn.js" as="script"><link rel="prefetch" href="/assets/index.html-n6Mwqi6a.js" as="script"><link rel="prefetch" href="/assets/index.html-Crx0G1sJ.js" as="script"><link rel="prefetch" href="/assets/index.html-D0l_ULcP.js" as="script"><link rel="prefetch" href="/assets/404.html-Brq6Oz2w.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="https://zentity.io/img/zentity-logo-xl.png" alt="zentity 中文文档"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">zentity 中文文档</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">多属性解析 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h3 id="基础用法教程-📖" tabindex="-1"><a class="header-anchor" href="#基础用法教程-📖"><span>基础用法教程 📖</span></a></h3><p>本教程是帮助您学习和执行 zentity 基本功能的系列教程之一。每篇教程都会在之前教程的基础上增加一些复杂功能，因此您可以从简单的功能开始，逐步学习更高级的功能。</p><ol><li><a class="route-link" href="/docs/basic-usage/exact-name-matching/">精确的名称匹配</a></li><li><a class="route-link" href="/docs/basic-usage/robust-name-matching/">强大的名称匹配</a></li><li><strong>多属性解析</strong> ← <em>你在这里</em></li><li><a class="route-link" href="/docs/basic-usage/multiple-resolver-resolution/">多解析器解析</a></li><li><a class="route-link" href="/docs/basic-usage/cross-index-resolution/">跨索引解析</a></li><li><a class="route-link" href="/docs/basic-usage/scoping-resolution/">Scoping Resolution</a></li></ol><h1 id="multiple-attribute-resolution" tabindex="-1"><a class="header-anchor" href="#multiple-attribute-resolution"><span>Multiple Attribute Resolution</span></a></h1><p>Never trust a single attribute in isolation, as a general rule.</p><p>Using a single attribute for entity resolution is a bad practice – an anti-pattern. It&#39;s an easy way to &quot;snowball&quot; many different entities together and drive up your false positive rate. The problem with using a single attribute is that any attribute is prone to error. Many people can share the same name or date of birth. A home address can be shared by family members or past residents. A Social Security Number can be forged, reissued, shared, or mistyped. A bogus value such as &quot;N/A&quot; or &quot;unknown&quot; can link many entities together.</p><p>Instead, trust multiple attributes to corroborate a match.</p><p>Consider this an exercise in probability theory. Suppose you have an index of millions of people. What&#39;s the probability that two people share the same name? It&#39;s probably high. What&#39;s the probability that people share the same name and the same phone number? It&#39;s probably much lower.</p><p>This tutorial adds more sophistication to the prior tutorials on exact name matching and robust name matching. This time you will map multiple attributes to multiple fields of a single index.</p><p>Let&#39;s dive in.</p><blockquote><p><strong>Before you start</strong></p><p>You must install Elasticsearch, Kibana, and zentity to complete this tutorial. This tutorial was tested with zentity-1.6.1-elasticsearch-7.10.1.</p><p><strong>Quick start</strong></p><p>You can use the zentity sandbox which has the required software and data for these tutorials. This will let you skip many of the setup steps.</p></blockquote><h2 id="_1-prepare-for-the-tutorial" tabindex="-1"><a class="header-anchor" href="#_1-prepare-for-the-tutorial"><span>1. Prepare for the tutorial</span></a></h2><h3 id="_1-1-install-the-required-plugins" tabindex="-1"><a class="header-anchor" href="#_1-1-install-the-required-plugins"><span>1.1 Install the required plugins</span></a></h3><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>This tutorial uses the phonetic analysis plugin and ICU analysis plugin for Elasticsearch. You will need to stop Elasticsearch, install these plugin, and start Elasticsearch. You can learn more about Elasticsearch plugin management here.</p><p>For Linux (in the $ES_HOME directory of a .tar.gz installation):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> bin/elasticsearch-plugin <span class="token function">install</span> analysis-phonetic</span>
<span class="line"><span class="token function">sudo</span> bin/elasticsearch-plugin <span class="token function">install</span> analysis-icu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>For Windows (in the $ES_HOME directory of a .zip installation):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">bin/elasticsearch-plugin.bat <span class="token function">install</span> analysis-phonetic</span>
<span class="line">bin/elasticsearch-plugin.bat <span class="token function">install</span> analysis-icu</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-open-the-kibana-console-ui" tabindex="-1"><a class="header-anchor" href="#_1-2-open-the-kibana-console-ui"><span>1.2 Open the Kibana Console UI</span></a></h3><p>The Kibana Console UI makes it easy to submit requests to Elasticsearch and read responses.</p><h3 id="_1-3-delete-any-old-tutorial-indices" tabindex="-1"><a class="header-anchor" href="#_1-3-delete-any-old-tutorial-indices"><span>1.3 Delete any old tutorial indices</span></a></h3><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Let&#39;s start from scratch. Delete any tutorial indices you might have created from other tutorials.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">DELETE zentity_tutorial_3_*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_1-4-create-the-tutorial-index" tabindex="-1"><a class="header-anchor" href="#_1-4-create-the-tutorial-index"><span>1.4 Create the tutorial index</span></a></h3><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Now create the index for this tutorial.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">PUT zentity_tutorial_3_multiple_attribute_resolution</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;analysis&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;street_suffix_map&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;pattern&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;(st)&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;replacement&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;street&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phonetic&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;encoder&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;nysiis&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;punct_white&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;pattern&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\\p{Punct}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;replacement&quot;</span> <span class="token operator">:</span> <span class="token string">&quot; &quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;remove_non_digits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;pattern&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;[^\\d]&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pattern_replace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;replacement&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;analyzer&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;name_clean&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;icu_normalizer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;icu_folding&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;punct_white&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;name_phonetic&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;icu_normalizer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;icu_folding&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;punct_white&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;phonetic&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;street_clean&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;icu_normalizer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;icu_folding&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;punct_white&quot;</span><span class="token punctuation">,</span></span>
<span class="line">              <span class="token string">&quot;trim&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phone_clean&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">              <span class="token string">&quot;remove_non_digits&quot;</span></span>
<span class="line">            <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;tokenizer&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_phonetic&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_phonetic&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;street_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;keyword&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;phone_clean&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;keyword&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-load-the-tutorial-data" tabindex="-1"><a class="header-anchor" href="#_1-5-load-the-tutorial-data"><span>1.5 Load the tutorial data</span></a></h3><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Add the tutorial data to the index.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST _bulk?refresh</span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;allie@example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;202-555-1234&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123 Main St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alicia&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Johnson&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;202-123-4567&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;300 Main St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allie&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123 Main St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ally&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Joans&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;202-555-1234&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Arlington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ej@example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Eli&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jonas&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VA&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;500 23rd Street&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;allie@example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;202-555-1234&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123 Main St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;+1 (202) 555 1234&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;555 Broad St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;alan.smith@example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alan&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;202-000-5555&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;555 Broad St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;alan.smith@example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alan&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020005555&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;555 Broad St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;555 Broad St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;allie@example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2025559867&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;allison.j.smith@corp.example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;555 Broad St&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Arlington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;allison.j.smith@corp.example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jones Smith&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;703-555-5555&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VA&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1 Corporate Way&quot;</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Arlington&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;elise.jonas@corp.example.net&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Elise&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jonas&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;703-555-5555&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VA&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1 Corporate Way&quot;</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here&#39;s what the tutorial data looks like.</p><table><thead><tr><th>id</th><th>first_name</th><th>last_name</th><th>street</th><th>city</th><th>state</th><th>phone</th><th>email</th></tr></thead><tbody><tr><td>1</td><td>Allie</td><td>Jones</td><td>123 Main St</td><td>Washington</td><td>DC</td><td>202-555-1234</td><td>allie@example.net</td></tr><tr><td>2</td><td>Alicia</td><td>Johnson</td><td>300 Main St</td><td>Washington</td><td>DC</td><td>202-123-4567</td><td></td></tr><tr><td>3</td><td>Allie</td><td>Jones</td><td>123 Main St</td><td>Washington</td><td>DC</td><td></td><td></td></tr><tr><td>4</td><td>Ally</td><td>Joans</td><td></td><td></td><td></td><td>202-555-1234</td><td></td></tr><tr><td>5</td><td>Eli</td><td>Jonas</td><td>500 23rd Street</td><td>Arlington</td><td>VA</td><td></td><td>ej@example.net</td></tr><tr><td>6</td><td>Allison</td><td>Jones</td><td>123 Main St</td><td>Washington</td><td>DC</td><td>202-555-1234</td><td>allie@example.net</td></tr><tr><td>7</td><td>Allison</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>+1 (202) 555 1234</td><td></td></tr><tr><td>8</td><td>Alan</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>202-000-5555</td><td>alan.smith@example.net</td></tr><tr><td>9</td><td>Alan</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>2020005555</td><td>alan.smith@example.net</td></tr><tr><td>10</td><td>Alison</td><td>Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td>202-555-9876</td><td></td></tr><tr><td>11</td><td>Alison</td><td>Jones-Smith</td><td></td><td></td><td></td><td>2025559867</td><td>allie@example.net</td></tr><tr><td>12</td><td>Allison</td><td>Jones-Smith</td><td>555 Broad St</td><td>Washington</td><td>DC</td><td></td><td>allison.j.smith@corp.example.net</td></tr><tr><td>13</td><td>Allison</td><td>Jones Smith</td><td>1 Corporate Way</td><td>Arlington</td><td>VA</td><td>703-555-5555</td><td>allison.j.smith@corp.example.net</td></tr><tr><td>14</td><td>Elise</td><td>Jonas</td><td>1 Corporate Way</td><td>Arlington</td><td>VA</td><td>703-555-5555</td><td>elise.jonas@corp.example.net</td></tr></tbody></table><h2 id="_2-create-the-entity-model" tabindex="-1"><a class="header-anchor" href="#_2-create-the-entity-model"><span>2. Create the entity model</span></a></h2><blockquote><p><strong>Note:</strong> Skip this step if you&#39;re using the zentity sandbox.</p></blockquote><p>Let&#39;s use the Models API to create the entity model below. We&#39;ll review each part of the model in depth.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">PUT _zentity/models/zentity_tutorial_3_person</span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;resolvers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;name_phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;phone&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;matchers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;simple&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;fuzzy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;fuzziness&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;exact&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;indices&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;.zentity-models&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_person&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-review-the-attributes" tabindex="-1"><a class="header-anchor" href="#_2-1-review-the-attributes"><span>2.1 Review the attributes</span></a></h3><p>We defined three attribute called &quot;first_name&quot;, &quot;last_name&quot;, and &quot;phone&quot; as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-review-the-resolvers" tabindex="-1"><a class="header-anchor" href="#_2-2-review-the-resolvers"><span>2.2 Review the resolvers</span></a></h3><p>We defined a single resolver called &quot;name_phone&quot; as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;resolvers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;name_phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;phone&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-review-the-matchers" tabindex="-1"><a class="header-anchor" href="#_2-3-review-the-matchers"><span>2.3 Review the matchers</span></a></h3><p>We defined three matchers called &quot;simple&quot;, &quot;fuzzy&quot;, and &quot;exact&quot; as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;matchers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;simple&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;fuzzy&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;match&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;fuzziness&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;exact&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;clause&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The &quot;exact&quot; matcher uses a simple term clause. term queries apply exact matching for keyword fields, while match queries apply fuzzy matching for text fields. We can use our &quot;exact&quot; matcher on index fields that have a keyword data type.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;{{ field }}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{{ value }}&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-review-the-indices" tabindex="-1"><a class="header-anchor" href="#_2-4-review-the-indices"><span>2.4 Review the indices</span></a></h3><p>We defined a single index as shown in this section:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;indices&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name.phonetic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone.clean&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span><span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;matcher&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>Tip</strong></p><p>Notice that the &quot;phone.keyword&quot; field is mapped to our &quot;exact&quot; matcher which uses a term query. Elasticsearch expects term queries to be executed on the exact value of keyword fields, whereas match queries apply full text analysis to values before performing the search. You might not get the results you&#39;d expect if you run either a term query on a text field or a match query on a keyword field.</p></blockquote><h2 id="_3-resolve-an-entity" tabindex="-1"><a class="header-anchor" href="#_3-resolve-an-entity"><span>3. Resolve an entity</span></a></h2><h3 id="_3-1-run-a-basic-resolution-job" tabindex="-1"><a class="header-anchor" href="#_3-1-run-a-basic-resolution-job"><span>3.1 Run a basic resolution job</span></a></h3><p>Let&#39;s use the Resolution API to resolve a person with a known first name, last name, and phone number.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST _zentity/resolution/zentity_tutorial_3_person?pretty&amp;_source=<span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;202-555-9876&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Alison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones-Smith&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;2025559867&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Alison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Smith&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;202-555-9876&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As expected, we retrieved two documents each with a matching first name, last name, and phone number. The documents were retrieved from different queries to the same index, as shown in the &quot;_index&quot;, &quot;_hop&quot;, and &quot;_query&quot; fields. All other documents were excluded from the results because they did not meet those criteria.</p><h3 id="_3-2-show-the-source" tabindex="-1"><a class="header-anchor" href="#_3-2-show-the-source"><span>3.2 Show the &quot;_source&quot;</span></a></h3><p>We can include the original values of each document as they exist in Elasticsearch.</p><p>Let&#39;s run the job again, and now let&#39;s include the &quot;_source&quot; field of each document. The &quot;_source&quot; field is the original JSON document that&#39;s stored in an Elasticsearch index.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST _zentity/resolution/zentity_tutorial_3_person?pretty&amp;_source=<span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;202-555-9876&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Alison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones-Smith&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;2025559867&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;allie@example.net&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2025559867&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Alison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Smith&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;202-555-9876&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;555 Broad St&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, in addition to the values mapped to our normalized &quot;_attributes&quot;, we can see the values of those attributes and the values of every other field as they exist in the &quot;_source&quot; of the documents.</p><h3 id="_3-3-show-the-explanation" tabindex="-1"><a class="header-anchor" href="#_3-3-show-the-explanation"><span>3.3 Show the &quot;_explanation&quot;</span></a></h3><p>We can learn how the documents matched, too.</p><p>Let&#39;s run the job again, and now let&#39;s include the &quot;_explanation&quot; field to see exactly why each document matched. The &quot;_explanation&quot; field tells us which resolvers caused a document to match, and more specifically, which input value matched which indexed value using which matcher and any parameters.</p><p><strong>Request</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">POST _zentity/resolution/zentity_tutorial_3_person?pretty&amp;_source=<span class="token boolean">true</span>&amp;_explanation=<span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;first_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Allison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;last_name&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;phone&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;202-555-9876&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Response</strong></p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Alison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Jones-Smith&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;2025559867&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_explanation&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;resolvers&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;name_phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;phone&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2025559867&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;allie@example.net&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2025559867&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zentity_tutorial_3_multiple_attribute_resolution&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_hop&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_query&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Alison&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;Smith&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;202-555-9876&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_explanation&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;resolvers&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;name_phone&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;attributes&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;phone&quot;</span> <span class="token punctuation">]</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;matches&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;first_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Allison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;last_name.phonetic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Jones-Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;simple&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2025559867&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;city&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Washington&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;first_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Alison&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;last_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;phone&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;state&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;DC&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;street&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;555 Broad St&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Each document matched because of the &quot;name_phone&quot; resolver as shown under &quot;_explanation&quot;.&quot;resolvers&quot;. But the resolvers matched for different reasons in each document. Notice that the first document matched on hop 0 and the other document matched on hop 1. The &quot;last_name&quot; of the input (&quot;Jones&quot;) matched the &quot;last_name&quot; of the second matching document (&quot;Smith&quot;) because both matched the &quot;last_name&quot; of the first matching document (&quot;Jones-Smith&quot;) and each document also had matching &quot;first_name&quot; and &quot;phone&quot; attributes.</p><p>You can see that our &quot;fuzzy&quot; matcher is handling messy values successfully, too, as shown in the example below. Notice how the last two numbers are transposed (76 and 67), which is a common form of typo.</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token property">&quot;_explanation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  ...</span>
<span class="line">  <span class="token property">&quot;matches&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attribute&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;target_field&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;phone.clean&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;target_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;202-555-9876&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_value&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2025559867&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_matcher&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;fuzzy&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;input_matcher_params&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    ...</span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h1><p>Congratulations! You learned how to map multiple attributes to multiple fields in a single index.</p><p>Hopefully a couple things are becoming clear in this tutorial:</p><p>Entity resolution is complex. This tutorial shows a simple example, and already there are many nuances to consider in the results, as we can see in the &quot;_explanation&quot; field. The &quot;_explanation&quot; field is a powerful tool for understanding, troubleshooting, and optimizing your match logic – especially as your data and models become more complex. The next tutorial will introduce multiple resolver resolution. You will resolve an entity using multiple combinations of attributes (i.e. &quot;resolvers&quot;) mapped to multiple fields of a single index.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: xu.feiran@qq.com">xufeiranfree</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/docs/basic-usage/multiple-resolver-resolution/" aria-label="多解析器解析"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>多解析器解析</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-mn1wI6jn.js" defer></script>
  </body>
</html>
